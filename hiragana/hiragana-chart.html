<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title-tag">Hiragana - HiraKata</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body class="bg-gradient-to-br from-slate-50 to-blue-50 text-slate-800 font-['Inter',sans-serif]">
    <!-- Header -->
    <header class="bg-gradient-to-r from-indigo-500 via-blue-500 to-indigo-600 shadow-2xl relative overflow-hidden">
        <!-- Decorative background -->
        <div class="absolute inset-0 bg-black/10"></div>
        <div class="absolute top-0 left-0 w-full h-full">
            <div class="absolute top-10 left-10 w-20 h-20 bg-white/10 rounded-full blur-xl"></div>
            <div class="absolute bottom-10 right-10 w-32 h-32 bg-white/10 rounded-full blur-2xl"></div>
        </div>
        
        <div class="relative z-10">
            <!-- Language selector top bar -->
            <div class="flex justify-end p-4">
                <div class="language-selector relative" id="language-selector">
                    <button
                        class="flex items-center space-x-2 px-4 py-2 bg-white/20 backdrop-blur-sm rounded-lg text-white hover:bg-white/30 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/50"
                        id="language-toggle"
                        onclick="window.toggleLanguageDropdown()"
                        aria-label="Seleccionar idioma"
                        aria-expanded="false"
                        aria-haspopup="true">
                        <span id="current-language-flag" class="text-lg"></span>
                        <span id="current-language-name" class="font-medium"></span>
                        <svg class="w-4 h-4 transition-transform duration-200" id="language-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div class="absolute top-full right-0 mt-2 bg-white rounded-lg shadow-xl border border-slate-200 py-2 min-w-[200px] z-50" id="language-dropdown" style="display:none" role="menu" aria-labelledby="language-toggle">
                        <button class="language-option w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 text-left" onclick="window.changeLanguage('es')">
                            <span class="text-lg">🇪🇸</span><span class="font-medium text-gray-700">Español</span><svg class="w-4 h-4 ml-auto text-blue-600 opacity-0" fill="currentColor" viewBox="0 0 20 20" id="check-es"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>
                        </button>
                        <button class="language-option w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 text-left" onclick="window.changeLanguage('en')">
                            <span class="text-lg">🇺🇸</span><span class="font-medium text-gray-700">English</span><svg class="w-4 h-4 ml-auto text-blue-600 opacity-0" fill="currentColor" viewBox="0 0 20 20" id="check-en"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>
                        </button>
                        <button class="language-option w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 text-left" onclick="window.changeLanguage('ja')">
                            <span class="text-lg">🇯🇵</span><span class="font-medium text-gray-700">日本語</span><svg class="w-4 h-4 ml-auto text-blue-600 opacity-0" fill="currentColor" viewBox="0 0 20 20" id="check-ja"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>
                        </button>
                    </div>
                </div>
            </div>
            <!-- Logo Section -->
            <div class="flex justify-center pt-8 pb-4">
                <a href="https://nakanakadev.github.io/hirakata/" 
                   class="transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-white/30 rounded-xl"
                   aria-label="HiraKata - Página principal">
                    <img class="h-16 md:h-20 drop-shadow-2xl" alt="Logo Hirakata" src="../hirakata-nobg.png">
                </a>
            </div>

            <!-- Title Section -->
            <div class="text-center pb-6 px-4">
                <h1 class="text-2xl md:text-3xl font-bold text-white mb-2 drop-shadow-lg flex items-center justify-center gap-2">
                    <span class="text-3xl">ひ</span>
                    <span data-i18n="hiragana.chartTitle">Tabla Completa de Hiragana</span>
                </h1>
                <p class="text-lg text-indigo-100" data-i18n="hiragana.chartSubtitle">
                    Referencia visual de todos los caracteres del silabario
                </p>
            </div>

            <!-- Navigation -->
            <nav class="bg-black/20 backdrop-blur-sm border-t border-white/20" role="navigation" aria-label="Navegación principal">
                <div class="container mx-auto flex justify-center space-x-4 md:space-x-6 py-3 px-4">
            <a href="../"
                       class="group px-4 py-2 text-white hover:text-indigo-100 transition-all duration-300 text-sm font-semibold rounded-lg hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white/50 border-2 border-transparent hover:border-white/30">
                        <span class="flex items-center space-x-2">
                            <span>🏠</span>
                <span data-i18n="navigation.home">Inicio</span>
                        </span>
                    </a>
            <a href="../hiragana/"
                       class="group px-4 py-2 text-white bg-white/20 transition-all duration-300 text-sm font-semibold rounded-lg border-2 border-white/50">
                        <span class="flex items-center space-x-2">
                            <span>ひ</span>
                <span data-i18n="navigation.hiragana">Hiragana</span>
                        </span>
                    </a>
            <a href="../katakana/"
                       class="group px-4 py-2 text-white hover:text-indigo-100 transition-all duration-300 text-sm font-semibold rounded-lg hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white/50 border-2 border-transparent hover:border-white/30">
                        <span class="flex items-center space-x-2">
                            <span>カ</span>
                <span data-i18n="navigation.katakana">Katakana</span>
                        </span>
                    </a>
                </div>
            </nav>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="py-16 px-4">
        <div class="container mx-auto max-w-7xl">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4" data-i18n="hiragana.chartTitle">
                    Tabla Completa de Hiragana
                </h2>
                <p class="text-xl text-slate-600 max-w-2xl mx-auto leading-relaxed" data-i18n="hiragana.chartSubtitle">
                    Referencia visual de todos los caracteres del silabario Hiragana
                </p>
            </div>

            <!-- Basic Hiragana Table -->
            <div class="bg-white rounded-2xl shadow-lg p-8 mb-12 border border-slate-100">
                <h3 class="text-2xl font-bold text-slate-900 mb-6 flex items-center gap-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-blue-600 rounded-lg flex items-center justify-center text-white text-sm font-bold">
                        ひ
                    </div>
                    <span data-i18n="hiragana.basicTitle">Hiragana Básico (Gojūon)</span>
                </h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-center">
                        <tbody id="hiragana-table-body" class="divide-y divide-slate-100">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Yōon Table -->
            <div class="bg-white rounded-2xl shadow-lg p-8 border border-slate-100">
                <h3 class="text-2xl font-bold text-slate-900 mb-6 flex items-center gap-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center text-white text-sm font-bold">
                        ゃ
                    </div>
                    <span data-i18n="hiragana.compoundTitle">Hiragana Compuesto (Yōon)</span>
                </h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-center">
                        <tbody id="yoon-table-body" class="divide-y divide-slate-100">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <script src="../components/i18n.js"></script>
    <script src="../components/language-selector-simple.js"></script>
    <script>
        // i18n ready handlers
        function applyTitleTag(){
            if(window.t){
                const titleTag=document.getElementById('page-title-tag');
                if(titleTag){
                    titleTag.textContent = window.t('hiragana.chartTitle') + ' - HiraKata';
                }
            }
        }
        function ensureLangInLinks(){
            if(!window.i18n) return; const lang=window.i18n.currentLanguage;
            document.querySelectorAll('a[href]').forEach(a=>{
                const href=a.getAttribute('href');
                if(!href || href.startsWith('#') || href.startsWith('http') || href.startsWith('mailto:')) return;
                try { const url=new URL(href, window.location.href); url.searchParams.set('lang', lang); a.setAttribute('href', url.pathname + (url.search?url.search:'')); } catch(_){ }
            });
        }
        document.addEventListener('i18nReady', ()=>{ applyTitleTag(); ensureLangInLinks(); });
        window.addEventListener('languageChanged', ()=>{ applyTitleTag(); ensureLangInLinks(); });
        if(window.i18n && (window.i18n.isReady || window.i18n.translations[window.i18n.currentLanguage])){ applyTitleTag(); ensureLangInLinks(); }
    </script>
    <script>
        fetch('../data/hiragana.json')
            .then(response => response.json())
            .then(data => {
                const tableBody = document.getElementById('hiragana-table-body');
                const yoonTableBody = document.getElementById('yoon-table-body');

                const consonantOrder = [
                    '', // Vocales
                    'k', 'g', // K y G
                    's', 'z', // S y Z
                    't', 'd', // T y D
                    'n', // N
                    'h', 'b', 'p', // H, B y P
                    'm', // M
                    'y', // Y
                    'r', // R
                    'w' // W
                ];

                consonantOrder.forEach(consonant => {
                    const row = document.createElement('tr');
                    let hasData = false;

                    ['a', 'i', 'u', 'e', 'o'].forEach(vowel => {
                        let romanization = consonant + vowel;

                        // Casos especiales: し (shi), ち (chi), つ (tsu), ふ (fu), じ (ji), ぢ (dji), ず (zu), づ (dzu)
                        if (consonant === 's' && vowel === 'i') romanization = 'shi';
                        if (consonant === 't' && vowel === 'i') romanization = 'chi';
                        if (consonant === 't' && vowel === 'u') romanization = 'tsu';
                        if (consonant === 'h' && vowel === 'u') romanization = 'fu';
                        if (consonant === 'z' && vowel === 'i') romanization = 'ji';
                        if (consonant === 'd' && vowel === 'i') romanization = 'dji';
                        if (consonant === 'z' && vowel === 'u') romanization = 'zu';
                        if (consonant === 'd' && vowel === 'u') romanization = 'dzu';

                        const characterData = data.hiragana.find(item => item.romanization === romanization);

                        if (characterData && characterData.romanization !== "wa" && characterData.romanization !== "wo" && characterData.romanization !== "n") {
                            const cell = document.createElement('td');
                            cell.className = 'p-4 border border-gray-200';

                            // Mostrar "zu" para ambos ず y づ, y "ji" para じ y "dji" para ぢ
                            let displayRomanization;
                            if (characterData.romanization === 'dzu') {
                                displayRomanization = 'zu'; // づ
                            } else if (characterData.romanization === 'dji') {
                                displayRomanization = 'ji'; // ぢ
                            } else {
                                displayRomanization = characterData.romanization;
                            }

                            cell.innerHTML = `
                                <div class="text-3xl font-bold text-gray-800">${characterData.character}</div>
                                <div class="text-sm text-gray-600 mt-1">${displayRomanization}</div>
                            `;
                            row.appendChild(cell);
                            hasData = true;
                        } else {
                            const cell = document.createElement('td');
                            cell.className = 'p-4 border border-gray-200';
                            cell.innerHTML = '';
                            row.appendChild(cell);
                        }
                    });

                    // Solo agregar la fila si tiene datos
                    if (hasData) {
                        tableBody.appendChild(row);
                    }
                });

                // Fila especial para "wa", "wo" y "n"
                const specialRow = document.createElement('tr');
                const specialCharacters = ['wa', 'wo', 'n'];
                let specialRowHasData = false;

                specialCharacters.forEach(romanization => {
                    const cell = document.createElement('td');
                    cell.className = 'p-4 border border-gray-200';

                    const characterData = data.hiragana.find(item => item.romanization === romanization);

                    if (characterData) {
                        cell.innerHTML = `
                            <div class="text-3xl font-bold text-gray-800">${characterData.character}</div>
                            <div class="text-sm text-gray-600 mt-1">${characterData.romanization}</div>
                        `;
                        specialRowHasData = true;
                    } else {
                        cell.innerHTML = '';
                    }

                    specialRow.appendChild(cell);
                });

                while (specialRow.children.length < 5) {
                    const emptyCell = document.createElement('td');
                    emptyCell.className = 'p-4 border border-gray-200';
                    emptyCell.innerHTML = '';
                    specialRow.appendChild(emptyCell);
                }

                if (specialRowHasData) {
                    tableBody.appendChild(specialRow);
                }

                // Filas de caracteres compuestos (yōon) en la tabla separada
                const yoonRows = [
                    { consonant: 'ky', vowels: ['kya', 'kyu', 'kyo'] },
                    { consonant: 'gy', vowels: ['gya', 'gyu', 'gyo'] },
                    { consonant: 'sh', vowels: ['sha', 'shu', 'sho'] },
                    { consonant: 'j', vowels: ['ja', 'ju', 'jo'] },
                    { consonant: 'ch', vowels: ['cha', 'chu', 'cho'] },
                    { consonant: 'ny', vowels: ['nya', 'nyu', 'nyo'] },
                    { consonant: 'hy', vowels: ['hya', 'hyu', 'hyo'] },
                    { consonant: 'by', vowels: ['bya', 'byu', 'byo'] },
                    { consonant: 'py', vowels: ['pya', 'pyu', 'pyo'] },
                    { consonant: 'my', vowels: ['mya', 'myu', 'myo'] },
                    { consonant: 'ry', vowels: ['rya', 'ryu', 'ryo'] }
                ];

                yoonRows.forEach(rowData => {
                    const row = document.createElement('tr');
                    let yoonRowHasData = false;

                    rowData.vowels.forEach(vowel => {
                        const cell = document.createElement('td');
                        cell.className = 'p-4 border border-gray-200';

                        const characterData = data.hiragana.find(item => item.romanization === vowel);

                        if (characterData) {
                            cell.innerHTML = `
                                <div class="p-4 hover:bg-slate-50 transition-colors duration-200 rounded-lg">
                                    <div class="text-3xl font-bold text-slate-800 mb-2">${characterData.character}</div>
                                    <div class="text-sm text-slate-500 font-medium">${characterData.romanization}</div>
                                </div>
                            `;
                            hasData = true;
                        } else {
                            cell.innerHTML = '<div class="p-4"></div>';
                        }

                        row.appendChild(cell);
                    });

                    // Solo agregar la fila si tiene datos
                    if (hasData) {
                        tableBody.appendChild(row);
                    }
                });

                // Yōon table generation
                const yoonConsonants = ['ky', 'gy', 'shy', 'jy', 'chy', 'ny', 'hy', 'by', 'py', 'my', 'ry'];
                
                yoonConsonants.forEach(consonant => {
                    const row = document.createElement('tr');
                    let yoonRowHasData = false;

                    ['a', 'u', 'o'].forEach(vowel => {
                        const cell = document.createElement('td');
                        let romanization = consonant + vowel;

                        // Casos especiales para yōon
                        if (consonant === 'shy') romanization = 'sh' + vowel;
                        if (consonant === 'jy') romanization = 'j' + vowel;
                        if (consonant === 'chy') romanization = 'ch' + vowel;

                        const characterData = data.hiragana.find(item => item.romanization === romanization);

                        if (characterData) {
                            cell.innerHTML = `
                                <div class="p-4 hover:bg-slate-50 transition-colors duration-200 rounded-lg">
                                    <div class="text-3xl font-bold text-slate-800 mb-2">${characterData.character}</div>
                                    <div class="text-sm text-slate-500 font-medium">${characterData.romanization}</div>
                                </div>
                            `;
                            yoonRowHasData = true;
                        } else {
                            cell.innerHTML = '<div class="p-4"></div>';
                        }

                        row.appendChild(cell);
                    });

                    // Solo agregar la fila yōon si tiene datos
                    if (yoonRowHasData) {
                        yoonTableBody.appendChild(row);
                    }
                });
            })
            .catch(error => {
                // Error cargando datos
            });
    </script>
    
            <div id="dynamic-footer" data-template=""></div>
            <script>
                (function initDynamicFooter(){
                    const c=document.getElementById('dynamic-footer'); if(!c) return;
                    function render(){
                        const tpl=c.dataset.template; if(!tpl) return;
                            const logoProcessed = tpl.replace(/\{\{logoPath\}\}/g,'../');
                            c.innerHTML = logoProcessed.replace(/\{\{t:([^}]+)\}\}/g,(m,k)=> (window.t?window.t(k.trim()): k.trim()));
                    }
                    fetch('../components/footer.html').then(r=>r.text()).then(h=>{ c.dataset.template=h; render(); });
                    window.addEventListener('i18nReady', render);
                    window.addEventListener('languageChanged', render);
                })();
            </script>
    <!-- Counter.dev -->
    <script
      src="https://cdn.counter.dev/script.js"
      data-id="61260487-e25d-4200-8b59-7a9d4f76bfa3"
      data-utcoffset="2"
    ></script>
</body>

</html>